<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tabela Peri√≥dica Inteligente</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Tabela Peri√≥dica Inteligente üî¨</h1>
      <button id="toggleTheme">üåó Tema</button>
    </header>

    <div class="controls">
      <button id="start" class="mic-btn">
        <span class="mic-icon">üéôÔ∏è</span>
        <span id="status">Clique para falar</span>
        <div class="mic-animation" id="micAnimation"></div>
      </button>
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="results">
      <p><strong>Pergunta:</strong> <span id="pergunta">‚Äî</span></p>
      <p><strong>Elementos:</strong> <span id="elementos">‚Äî</span></p>
    </div>

    <button id="connect" class="connect-btn">üîó Conectar √† TPI</button>

    <div class="history">
      <h2>Hist√≥rico</h2>
      <ul id="historyList"></ul>
    </div>

    <!-- Bot√£o para mostrar/ocultar a tabela -->
    <button id="toggleTabela" class="toggle-tabela">üî¨ Mostrar Tabela Digital</button>

    <!-- In√≠cio da Tabela Peri√≥dica Digital -->
    <div id="tabelaDigital" class="tabela-digital hidden">
      <!-- LINHA 1 -->
      <div class="elemento" data-simbolo="H">H</div>
      <!-- Espa√ßos vazios -->
      <div class="espaco" style="grid-column: span 16;"></div>
      <div class="elemento" data-simbolo="He">He</div>

      <!-- LINHA 2 -->
      <div class="elemento" data-simbolo="Li">Li</div>
      <div class="elemento" data-simbolo="Be">Be</div>
      <div class="espaco" style="grid-column: span 10;"></div>
      <div class="elemento" data-simbolo="B">B</div>
      <div class="elemento" data-simbolo="C">C</div>
      <div class="elemento" data-simbolo="N">N</div>
      <div class="elemento" data-simbolo="O">O</div>
      <div class="elemento" data-simbolo="F">F</div>
      <div class="elemento" data-simbolo="Ne">Ne</div>

      <!-- LINHAS 3 a 7 -->
      <div class="elemento" data-simbolo="Na">Na</div>
      <div class="elemento" data-simbolo="Mg">Mg</div>
      <div class="espaco" style="grid-column: span 10;"></div>
      <div class="elemento" data-simbolo="Al">Al</div>
      <div class="elemento" data-simbolo="Si">Si</div>
      <div class="elemento" data-simbolo="P">P</div>
      <div class="elemento" data-simbolo="S">S</div>
      <div class="elemento" data-simbolo="Cl">Cl</div>
      <div class="elemento" data-simbolo="Ar">Ar</div>
      <div class="elemento" data-simbolo="K">K</div>
      <div class="elemento" data-simbolo="Ca">Ca</div>
      <div class="elemento" data-simbolo="Sc">Sc</div>
      <div class="elemento" data-simbolo="Ti">Ti</div>
      <div class="elemento" data-simbolo="V">V</div>
      <div class="elemento" data-simbolo="Cr">Cr</div>
      <div class="elemento" data-simbolo="Mn">Mn</div>
      <div class="elemento" data-simbolo="Fe">Fe</div>
      <div class="elemento" data-simbolo="Co">Co</div>
      <div class="elemento" data-simbolo="Ni">Ni</div>
      <div class="elemento" data-simbolo="Cu">Cu</div>
      <div class="elemento" data-simbolo="Zn">Zn</div>
      <div class="elemento" data-simbolo="Ga">Ga</div>
      <div class="elemento" data-simbolo="Ge">Ge</div>
      <div class="elemento" data-simbolo="As">As</div>
      <div class="elemento" data-simbolo="Se">Se</div>
      <div class="elemento" data-simbolo="Br">Br</div>
      <div class="elemento" data-simbolo="Kr">Kr</div>
      <div class="elemento" data-simbolo="Rb">Rb</div>
      <div class="elemento" data-simbolo="Sr">Sr</div>
      <div class="elemento" data-simbolo="Y">Y</div>
      <div class="elemento" data-simbolo="Zr">Zr</div>
      <div class="elemento" data-simbolo="Nb">Nb</div>
      <div class="elemento" data-simbolo="Mo">Mo</div>
      <div class="elemento" data-simbolo="Tc">Tc</div>
      <div class="elemento" data-simbolo="Ru">Ru</div>
      <div class="elemento" data-simbolo="Rh">Rh</div>
      <div class="elemento" data-simbolo="Pd">Pd</div>
      <div class="elemento" data-simbolo="Ag">Ag</div>
      <div class="elemento" data-simbolo="Cd">Cd</div>
      <div class="elemento" data-simbolo="In">In</div>
      <div class="elemento" data-simbolo="Sn">Sn</div>
      <div class="elemento" data-simbolo="Sb">Sb</div>
      <div class="elemento" data-simbolo="Te">Te</div>
      <div class="elemento" data-simbolo="I">I</div>
      <div class="elemento" data-simbolo="Xe">Xe</div>
      <div class="elemento" data-simbolo="Cs">Cs</div>
      <div class="elemento" data-simbolo="Ba">Ba</div>
      <div class="elemento" data-simbolo="La">La</div>
      <div class="elemento" data-simbolo="Hf">Hf</div>
      <div class="elemento" data-simbolo="Ta">Ta</div>
      <div class="elemento" data-simbolo="W">W</div>
      <div class="elemento" data-simbolo="Re">Re</div>
      <div class="elemento" data-simbolo="Os">Os</div>
      <div class="elemento" data-simbolo="Ir">Ir</div>
      <div class="elemento" data-simbolo="Pt">Pt</div>
      <div class="elemento" data-simbolo="Au">Au</div>
      <div class="elemento" data-simbolo="Hg">Hg</div>
      <div class="elemento" data-simbolo="Tl">Tl</div>
      <div class="elemento" data-simbolo="Pb">Pb</div>
      <div class="elemento" data-simbolo="Bi">Bi</div>
      <div class="elemento" data-simbolo="Po">Po</div>
      <div class="elemento" data-simbolo="At">At</div>
      <div class="elemento" data-simbolo="Rn">Rn</div>
      <div class="elemento" data-simbolo="Fr">Fr</div>
      <div class="elemento" data-simbolo="Ra">Ra</div>
      <div class="elemento" data-simbolo="Ac">Ac</div>
      <div class="elemento" data-simbolo="Rf">Rf</div>
      <div class="elemento" data-simbolo="Db">Db</div>
      <div class="elemento" data-simbolo="Sg">Sg</div>
      <div class="elemento" data-simbolo="Bh">Bh</div>
      <div class="elemento" data-simbolo="Hs">Hs</div>
      <div class="elemento" data-simbolo="Mt">Mt</div>
      <div class="elemento" data-simbolo="Ds">Ds</div>
      <div class="elemento" data-simbolo="Rg">Rg</div>
      <div class="elemento" data-simbolo="Cn">Cn</div>
      <div class="elemento" data-simbolo="Nh">Nh</div>
      <div class="elemento" data-simbolo="Fl">Fl</div>
      <div class="elemento" data-simbolo="Mc">Mc</div>
      <div class="elemento" data-simbolo="Lv">Lv</div>
      <div class="elemento" data-simbolo="Ts">Ts</div>
      <div class="elemento" data-simbolo="Og">Og</div>
<!-- Linha de Lantan√≠deos -->
<div class="linha-extra">
    <span class="label-linha">* Lantan√≠deos:</span>
    <div class="elemento" data-simbolo="Ce">Ce</div>
    <div class="elemento" data-simbolo="Pr">Pr</div>
    <div class="elemento" data-simbolo="Nd">Nd</div>
    <div class="elemento" data-simbolo="Pm">Pm</div>
    <div class="elemento" data-simbolo="Sm">Sm</div>
    <div class="elemento" data-simbolo="Eu">Eu</div>
    <div class="elemento" data-simbolo="Gd">Gd</div>
    <div class="elemento" data-simbolo="Tb">Tb</div>
    <div class="elemento" data-simbolo="Dy">Dy</div>
    <div class="elemento" data-simbolo="Ho">Ho</div>
    <div class="elemento" data-simbolo="Er">Er</div>
    <div class="elemento" data-simbolo="Tm">Tm</div>
    <div class="elemento" data-simbolo="Yb">Yb</div>
    <div class="elemento" data-simbolo="Lu">Lu</div>
  </div>
<!-- Linha de Actin√≠deos -->
<div class="linha-extra">
    <span class="label-linha">* Actin√≠deos:</span>
    <div class="elemento" data-simbolo="Th">Th</div>
    <div class="elemento" data-simbolo="Pa">Pa</div>
    <div class="elemento" data-simbolo="U">U</div>
    <div class="elemento" data-simbolo="Np">Np</div>
    <div class="elemento" data-simbolo="Pu">Pu</div>
    <div class="elemento" data-simbolo="Am">Am</div>
    <div class="elemento" data-simbolo="Cm">Cm</div>
    <div class="elemento" data-simbolo="Bk">Bk</div>
    <div class="elemento" data-simbolo="Cf">Cf</div>
    <div class="elemento" data-simbolo="Es">Es</div>
    <div class="elemento" data-simbolo="Fm">Fm</div>
    <div class="elemento" data-simbolo="Md">Md</div>
    <div class="elemento" data-simbolo="No">No</div>
    <div class="elemento" data-simbolo="Lr">Lr</div>
  </div>
                                  
      <!-- Para manter curto aqui no chat, posso te enviar a vers√£o com os 118 elementos em arquivo depois se quiser -->

      <!-- √öltima linha de exemplo -->
      <div class="elemento" data-simbolo="Og">Og</div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const startBtn = document.getElementById("start");
      const perguntaSpan = document.getElementById("pergunta");
      const elementosSpan = document.getElementById("elementos");
      const micStatus = document.getElementById("status");
      const micAnim = document.getElementById("micAnimation");
      const progressBar = document.getElementById("progressBar");
      const historyList = document.getElementById("historyList");
      const toggleThemeBtn = document.getElementById("toggleTheme");
      const toggleTabelaBtn = document.getElementById("toggleTabela");
      const tabelaDigital = document.getElementById("tabelaDigital");

      let device, characteristic;

      toggleThemeBtn.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
        localStorage.setItem("tema", document.body.classList.contains("dark-mode") ? "dark" : "light");
      });

      if (localStorage.getItem("tema") === "dark") {
        document.body.classList.add("dark-mode");
      }

      toggleTabelaBtn.addEventListener("click", () => {
        tabelaDigital.classList.toggle("hidden");
        toggleTabelaBtn.textContent = tabelaDigital.classList.contains("hidden")
          ? "üî¨ Mostrar Tabela Digital"
          : "üîΩ Ocultar Tabela Digital";
      });

      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "pt-BR";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      startBtn.addEventListener("click", () => {
        recognition.start();
        micStatus.textContent = "Escutando...";
        micAnim.classList.add("listening");
        progressBar.style.width = "0%";
      });

      recognition.onresult = async (event) => {
        micStatus.textContent = "Processando...";
        micAnim.classList.remove("listening");
        progressBar.style.width = "50%";

        const texto = event.results[0][0].transcript;
        perguntaSpan.textContent = texto;

        try {
          const resposta = await fetch("https://tpi-api-854n.onrender.com/pergunta", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ texto })
          });

          const dados = await resposta.json();
          progressBar.style.width = "100%";

          if (dados.elementos) {
            const elementos = dados.elementos;
            elementosSpan.textContent = elementos;
            await enviarParaArduino(elementos);
            destacarElementos(elementos);
            const item = document.createElement("li");
            item.textContent = `üó£Ô∏è ${texto} ‚Üí üî¨ ${elementos}`;
            historyList.prepend(item);
            micStatus.textContent = "Pronto! ‚úîÔ∏è";
          } else {
            micStatus.textContent = "Erro na resposta.";
            elementosSpan.textContent = "‚Äî";
          }
        } catch (e) {
          micStatus.textContent = "Erro ao processar.";
          console.error(e);
        }
      };

      recognition.onerror = () => {
        micStatus.textContent = "Erro no reconhecimento";
        micAnim.classList.remove("listening");
      };

      async function enviarParaArduino(elementos) {
        if (characteristic) {
          const encoder = new TextEncoder();
          await characteristic.writeValue(encoder.encode(elementos));
        } else {
          console.warn("Bluetooth n√£o conectado.");
        }
      }

      function destacarElementos(simbolosString) {
  const simbolos = simbolosString.replace(/\s/g, "").split(",");

  document.querySelectorAll(".elemento").forEach(el => {
    const simbolo = el.getAttribute("data-simbolo");

    // Limpa classes anteriores
    el.classList.remove(
      "destacado",
      "dest-hidrogenio", "dest-alcalinos", "dest-alcalino-terrosos",
      "dest-transicao", "dest-pos-transicao", "dest-grupo14",
      "dest-grupo15", "dest-grupo16", "dest-halog√™nios",
      "dest-gases-nobres", "dest-lantanideos", "dest-actinideos"
    );

    if (simbolos.includes(simbolo)) {
      const grupoClasse = grupoPorElemento[simbolo];
      if (grupoClasse) {
        el.classList.add("destacado", grupoClasse);
      }
    }
  });
}

    });
    // Mapa de grupo qu√≠mico por s√≠mbolo
const grupoPorElemento = {
  H: "dest-hidrogenio",

  Li: "dest-alcalinos", Na: "dest-alcalinos", K: "dest-alcalinos",
  Rb: "dest-alcalinos", Cs: "dest-alcalinos", Fr: "dest-alcalinos",

  Be: "dest-alcalino-terrosos", Mg: "dest-alcalino-terrosos",
  Ca: "dest-alcalino-terrosos", Sr: "dest-alcalino-terrosos",
  Ba: "dest-alcalino-terrosos", Ra: "dest-alcalino-terrosos",

  Sc: "dest-transicao", Ti: "dest-transicao", V: "dest-transicao",
  Cr: "dest-transicao", Mn: "dest-transicao", Fe: "dest-transicao",
  Co: "dest-transicao", Ni: "dest-transicao", Cu: "dest-transicao",
  Zn: "dest-transicao", Y: "dest-transicao", Zr: "dest-transicao",
  Nb: "dest-transicao", Mo: "dest-transicao", Tc: "dest-transicao",
  Ru: "dest-transicao", Rh: "dest-transicao", Pd: "dest-transicao",
  Ag: "dest-transicao", Cd: "dest-transicao", Hf: "dest-transicao",
  Ta: "dest-transicao", W: "dest-transicao", Re: "dest-transicao",
  Os: "dest-transicao", Ir: "dest-transicao", Pt: "dest-transicao",
  Au: "dest-transicao", Hg: "dest-transicao", Rf: "dest-transicao",
  Db: "dest-transicao", Sg: "dest-transicao", Bh: "dest-transicao",
  Hs: "dest-transicao", Mt: "dest-transicao", Ds: "dest-transicao",
  Rg: "dest-transicao", Cn: "dest-transicao",

  Al: "dest-pos-transicao", Ga: "dest-pos-transicao",
  In: "dest-pos-transicao", Tl: "dest-pos-transicao", Nh: "dest-pos-transicao",

  C: "dest-grupo14", Si: "dest-grupo14", Ge: "dest-grupo14",
  Sn: "dest-grupo14", Pb: "dest-grupo14", Fl: "dest-grupo14",

  N: "dest-grupo15", P: "dest-grupo15", As: "dest-grupo15",
  Sb: "dest-grupo15", Bi: "dest-grupo15", Mc: "dest-grupo15",

  O: "dest-grupo16", S: "dest-grupo16", Se: "dest-grupo16",
  Te: "dest-grupo16", Po: "dest-grupo16",

  F: "dest-halog√™nios", Cl: "dest-halog√™nios", Br: "dest-halog√™nios",
  I: "dest-halog√™nios", At: "dest-halog√™nios", Ts: "dest-halog√™nios",

  He: "dest-gases-nobres", Ne: "dest-gases-nobres", Ar: "dest-gases-nobres",
  Kr: "dest-gases-nobres", Xe: "dest-gases-nobres", Rn: "dest-gases-nobres",
  Og: "dest-gases-nobres",

  La: "dest-lantanideos", Ce: "dest-lantanideos", Pr: "dest-lantanideos",
  Nd: "dest-lantanideos", Pm: "dest-lantanideos", Sm: "dest-lantanideos",
  Eu: "dest-lantanideos", Gd: "dest-lantanideos", Tb: "dest-lantanideos",
  Dy: "dest-lantanideos", Ho: "dest-lantanideos", Er: "dest-lantanideos",
  Tm: "dest-lantanideos", Yb: "dest-lantanideos", Lu: "dest-lantanideos",

  Ac: "dest-actinideos", Th: "dest-actinideos", Pa: "dest-actinideos",
  U: "dest-actinideos", Np: "dest-actinideos", Pu: "dest-actinideos",
  Am: "dest-actinideos", Cm: "dest-actinideos", Bk: "dest-actinideos",
  Cf: "dest-actinideos", Es: "dest-actinideos", Fm: "dest-actinideos",
  Md: "dest-actinideos", No: "dest-actinideos", Lr: "dest-actinideos"
};

  </script>
</body>
</html>
